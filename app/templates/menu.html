<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Transportima - Menu</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" />
    <style>
      :root {
        --primary: #8a48f4;
        --accent: #ffb712;
        --bg: #121212;
        --text: #ffffff;
        --textf: #000000;
        --card: #1f1f1f;
      }

      body {
        background-color: var(--bg);
        color: var(--text);
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
      }

      .navbar {
        background-color: var(--primary);
        padding: 1rem;
      }

      .navbar-brand img {
        height: 40px;
      }

      .nav-link {
        color: #fff;
        margin: 0 1rem;
        font-weight: 500;
      }

      .nav-link:hover,
      .nav-link.active {
        color: var(--accent);
      }

      .container-form {
        margin: 4rem auto 2rem;
        max-width: 700px;
        background: var(--card);
        padding: 2rem;
        border-radius: 10px;
      }

      .form-label {
        margin-bottom: 0.5rem;
        font-weight: 500;
      }

<<<<<<< Updated upstream
      .form-control {
        border-radius: 8px;
        border: 1px solid #ccc;
        padding: 0.75rem;
        background-color:rgb(255, 255, 255);
        color: var(--text);
        margin-bottom: 1rem;
      }

      .dropdown-menu {
=======
      .custom-dropdown {
        position: relative;
        margin-bottom: 1rem;
      }

      .dropdown-input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ccc;
        border-radius: 8px;
        background-color: white;
        color: var(--textf);
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .dropdown-arrow {
        font-size: 12px;
        color: #666;
        transition: transform 0.3s ease;
      }

      .dropdown-arrow.open {
        transform: rotate(180deg);
      }

      .dropdown-list {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #ccc;
        border-top: none;
        border-radius: 0 0 8px 8px;
>>>>>>> Stashed changes
        max-height: 200px;
        overflow-y: auto;
      }

      .dropdown-item {
        color: white;
        cursor: pointer;
      }

      .dropdown-item:hover {
        background-color: var(--accent);
        color: #000;
      }

<<<<<<< Updated upstream
=======
      .search-input {
        width: 100%;
        padding: 0.5rem;
        border: none;
        border-bottom: 1px solid #eee;
        background: #f8f9fa;
        color: var(--textf);
      }

>>>>>>> Stashed changes
      .btn-custom {
        background: var(--primary);
        border: none;
        color: white;
        padding: 10px 25px;
        border-radius: 20px;
        display: block;
        width: 100%;
      }

      .btn-custom:hover {
        background: var(--accent);
        color: #000;
      }

      .results {
        margin: 3rem auto;
        max-width: 1000px;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 2rem;
      }

      .card-mode {
        background: var(--card);
        border: none;
        border-radius: 10px;
        width: 240px;
        padding: 1.5rem;
        text-align: center;
      }

      .card-mode img {
        width: 60px;
        margin-bottom: 1rem;
      }

      #route_path {
        font-weight: 600;
        margin: 2rem auto;
        text-align: center;
      }

      footer {
        background: var(--primary);
        color: white;
        padding: 1rem;
        text-align: center;
        margin-top: 2rem;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg">
      <div class="container">
<<<<<<< Updated upstream
        <a class="navbar-brand" href="#">
=======
        <a class="navbar-brand" href="{{ url_for('index') }}">
>>>>>>> Stashed changes
          <img src="{{ url_for('static', filename='assets/TransportimaP.png') }}" alt="Logo" />
        </a>
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
<<<<<<< Updated upstream
            <a class="nav-link" href="{{ url_for('home') }}">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="{{ url_for('menu') }}">Menu</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Modal Box -->
    <section id="modalBox">
      <span class="overlay"></span>
      <div class="modal-box">
        <h2>Attention</h2>
        <h3>
          <ol>
            <li>Make sure you have a destination in a regional city of Central Java Province</li>
            <li>Specify your initial destination by selecting an available city</li>
            <li>Specify your final destination by selecting an available city</li>
            <li>Press the submit button</li>
            <li>The distance will appear in the box of each transportation mode</li>
            <li>ENJOY YOUR TRIP</li>
          </ol>
        </h3>
        <div class="buttons">
          <button class="close-btn">Close</button>
        </div>
=======
            <a class="nav-link {% if request.path == '/home' %}active{% endif %}" href="{{ url_for('home') }}">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/menu' %}active{% endif %}" href="{{ url_for('menu') }}">Menu</a>
          </li>
        </ul>
>>>>>>> Stashed changes
      </div>
    </nav>

    <section class="container-form">
      <form onsubmit="process(event)">
        <div class="mb-3">
<<<<<<< Updated upstream
          <label for="startCity" class="form-label">Start City</label>
          <input type="textf" class="form-control" id="startCity" name="startCity" placeholder="Type to search..." list="cityList" required>
        </div>
        <div class="mb-3">
          <label for="finishCity" class="form-label">Finish City</label>
          <input type="textf" class="form-control" id="finishCity" name="finishCity" placeholder="Type to search..." list="cityList" required>
        </div>
        <datalist id="cityList">
          {% for city in cities %}
          <option value="{{ city|capitalize }}"></option>
          {% endfor %}
        </datalist>
        <button type="submit" class="btn btn-custom">Find Route</button>
=======
          <label class="form-label">Start City</label>
          <div class="custom-dropdown">
            <div class="dropdown-input" onclick="toggleDropdown('startCity')">
              <span id="startCitySelected">Select Start City</span>
              <span class="dropdown-arrow">▼</span>
            </div>
            <div class="dropdown-list" id="startCityDropdown">
              <input type="text" class="search-input" placeholder="Search cities..." onkeyup="filterCities('startCity', this.value)">
              <div class="dropdown-items" id="startCityItems"></div>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Finish City</label>
          <div class="custom-dropdown">
            <div class="dropdown-input" onclick="toggleDropdown('finishCity')">
              <span id="finishCitySelected">Select Finish City</span>
              <span class="dropdown-arrow">▼</span>
            </div>
            <div class="dropdown-list" id="finishCityDropdown">
              <input type="text" class="search-input" placeholder="Search cities..." onkeyup="filterCities('finishCity', this.value)">
              <div class="dropdown-items" id="finishCityItems"></div>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label for="algorithm" class="form-label">Choose Algorithm</label>
          <select id="algorithm" class="form-select" required>
            <option value="" selected disabled>Select Algorithm</option>
            <option value="dijkstra">Dijkstra</option>
            <option value="bfs">Breadth-First Search (BFS)</option>
            <option value="dfs">Depth-First Search (DFS)</option>
          </select>
        </div>

        <button type="submit" class="btn-custom">Find Route</button>
>>>>>>> Stashed changes
      </form>
    </section>

    <section class="results">
      <div class="card-mode">
        <img src="{{ url_for('static', filename='assets/iconmotor1.png') }}" alt="Motorcycle" />
        <h5>Motorcycle</h5>
        <p id="motorcycle">... KM</p>
      </div>
      <div class="card-mode">
        <img src="{{ url_for('static', filename='assets/iconcar.png') }}" alt="Car" />
        <h5>Car</h5>
        <p id="car">... KM</p>
      </div>
      <div class="card-mode">
        <img src="{{ url_for('static', filename='assets/icontrain.png') }}" alt="Train" />
        <h5>Train</h5>
        <p id="train">... KM</p>
      </div>
    </section>

    <div id="route_path">Route: ...</div>
<<<<<<< Updated upstream

    <section class="city-list">
      <div class="container">
        <h5 class="text-center mb-4">Available Cities in Central Java</h5>
        <div class="row row-cols-1 row-cols-md-3 g-3">
          {% set city_names = [
            'Wonogiri', 'Sukoharjo', 'Karanganyar', 'Klaten', 'Boyolali', 'Surakarta',
            'Sragen', 'Grobogan', 'Semarang', 'Kota Semarang', 'Demak', 'Kudus',
            'Pati', 'Blora', 'Rembang', 'Jepara', 'Magelang', 'Kota Magelang',
            'Temanggung', 'Kendal', 'Kota Salatiga', 'Purworejo', 'Wonosobo', 'Batang',
            'Banjarnegara', 'Pekalongan', 'Kota Pekalongan', 'Kebumen', 'Cilacap',
            'Banyumas', 'Purbalingga', 'Brebes', 'Tegal', 'Kota Tegal', 'Pemalang'
          ] %}
          {% for city in city_names %}
          <div class="col">
            <div class="p-2 ps-3 rounded bg-dark bg-opacity-10">
              <span>•</span> {{ city }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>
=======
    <div id="used_algorithm" style="text-align: center; margin-top: 1rem;"></div>
>>>>>>> Stashed changes

    <footer>
      <img src="{{ url_for('static', filename='assets/TransportimaP.png') }}" height="30" />
      <p class="mt-2">&copy; 2025 Transportima</p>
    </footer>

    <script>
<<<<<<< Updated upstream
      async function process(event) {
        event.preventDefault();
        const startCity = document.getElementById('startCity').value;
        const finishCity = document.getElementById('finishCity').value;
        const res = await fetch('/api/process', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ start: startCity, finish: finishCity })
        });
        const data = await res.json();
        document.getElementById('motorcycle').innerText = `${data.shortest_path_length} KM`;
        document.getElementById('car').innerText = `${data.shortest_path_length_car} KM`;
        document.getElementById('train').innerText = `${data.shortest_path_length_train} KM`;
        document.getElementById('route_path').innerText = `Route: ${data.route_path}`;
      }

      function showModal() {
        document.querySelector('.overlay').classList.add('active');
        document.querySelector('.modal-box').classList.add('active');
      }

      document.querySelector('.close-btn').addEventListener('click', () => {
        document.querySelector('.overlay').classList.remove('active');
        document.querySelector('.modal-box').classList.remove('active');
      });

      document.querySelector('.overlay').addEventListener('click', () => {
        document.querySelector('.overlay').classList.remove('active');
        document.querySelector('.modal-box').classList.remove('active');
=======
      const cities = [
        'Wonogiri', 'Sukoharjo', 'Karanganyar', 'Klaten', 'Boyolali', 'Surakarta',
        'Sragen', 'Grobogan', 'Semarang', 'Kota Semarang', 'Demak', 'Kudus',
        'Pati', 'Blora', 'Rembang', 'Jepara', 'Magelang', 'Kota Magelang',
        'Temanggung', 'Kendal', 'Kota Salatiga', 'Purworejo', 'Wonosobo', 'Batang',
        'Banjarnegara', 'Pekalongan', 'Kota Pekalongan', 'Kebumen', 'Cilacap',
        'Banyumas', 'Purbalingga', 'Brebes', 'Tegal', 'Kota Tegal', 'Pemalang'
      ];

      let selectedStartCity = '';
      let selectedFinishCity = '';

      function populateDropdowns() {
        const startItems = document.getElementById('startCityItems');
        const finishItems = document.getElementById('finishCityItems');
        cities.forEach(city => {
          const item1 = document.createElement('div');
          item1.className = 'dropdown-item';
          item1.textContent = city;
          item1.onclick = () => selectCity('startCity', city);
          startItems.appendChild(item1);

          const item2 = document.createElement('div');
          item2.className = 'dropdown-item';
          item2.textContent = city;
          item2.onclick = () => selectCity('finishCity', city);
          finishItems.appendChild(item2);
        });
      }

      function toggleDropdown(type) {
        const dropdown = document.getElementById(type + 'Dropdown');
        const arrow = dropdown.previousElementSibling.querySelector('.dropdown-arrow');
        const other = type === 'startCity' ? 'finishCity' : 'startCity';
        document.getElementById(other + 'Dropdown').classList.remove('show');
        document.getElementById(other + 'Dropdown').previousElementSibling.querySelector('.dropdown-arrow').classList.remove('open');
        dropdown.classList.toggle('show');
        arrow.classList.toggle('open');
      }

      function selectCity(type, city) {
        if (type === 'startCity') {
          selectedStartCity = city;
          document.getElementById('startCitySelected').textContent = city;
        } else {
          selectedFinishCity = city;
          document.getElementById('finishCitySelected').textContent = city;
        }
        document.getElementById(type + 'Dropdown').classList.remove('show');
        document.getElementById(type + 'Dropdown').previousElementSibling.querySelector('.dropdown-arrow').classList.remove('open');
      }

      function filterCities(type, value) {
        const items = document.getElementById(type + 'Items').children;
        for (let item of items) {
          item.style.display = item.textContent.toLowerCase().includes(value.toLowerCase()) ? 'block' : 'none';
        }
      }

      async function process(event) {
        event.preventDefault();

        if (!selectedStartCity || !selectedFinishCity) {
          alert('Please select both start and finish cities');
          return;
        }

        if (selectedStartCity === selectedFinishCity) {
          alert('Start and finish cities cannot be the same');
          return;
        }

        const algorithm = document.getElementById('algorithm').value;
        const endpoint = `http://localhost:5000/api/${algorithm}`;

        try {
          const res = await fetch(endpoint, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              start: selectedStartCity.toLowerCase(),
              finish: selectedFinishCity.toLowerCase()
            })
          });

          const data = await res.json();

          if (!res.ok) {
            throw new Error(data.error || 'Unknown error');
          }

          // Tampilkan hasil ke UI
          document.getElementById('motorcycle').innerText = `${data.motorcycle || data.distance || data.path_length || '...'} KM`;
          document.getElementById('car').innerText = `${data.car || data.distance || data.path_length || '...'} KM`;
          document.getElementById('train').innerText = `${data.train || data.distance || data.path_length || '...'} KM`;
          document.getElementById('route_path').innerText = `Route: ${data.route || data.path || data.route_path || '...'}`
          document.getElementById('used_algorithm').innerText = `Algorithm used: ${algorithm.toUpperCase()}`;
        } catch (err) {
          console.error(err);
          alert('Failed to get result: ' + err.message);
        }
      }

      document.addEventListener('DOMContentLoaded', populateDropdowns);
      document.addEventListener('click', function (e) {
        if (!e.target.closest('.custom-dropdown')) {
          document.querySelectorAll('.dropdown-list').forEach(el => el.classList.remove('show'));
          document.querySelectorAll('.dropdown-arrow').forEach(el => el.classList.remove('open'));
        }
>>>>>>> Stashed changes
      });
    </script>
  </body>
</html>
